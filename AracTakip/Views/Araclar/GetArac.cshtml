@model AracTakip.Models.AracGuncelleme
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Araç Güncelleme Sayfası</h2>
<br />
<div class="row">
    <div class="col-md-3">
        <label>Plaka</label>
        <input type="text" class="form-control" id="Plaka" value="@Model.Plaka"/>
    </div>
    <div class="col-md-3">
        <label>Şasi Numarası</label>
        <input type="text" class="form-control" id="SasiNo"  value="@Model.SasiNo"/>
    </div>
    <div class="col-md-3">
        <label>Renk</label>
        <input type="text" class="form-control" id="Renk" value="@Model.Renk"/>
    </div>
    <div class="col-md-3">
        <label>Yıl</label>
        <input type="text" class="form-control" id="Yil" value="@Model.Yil"/>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-4">
        <select class="js-example-basic-single form-control" id="Marka">
            <option selected>Marka seçiniz</option>
            @foreach (var item in Model.markalar.OrderBy(x => x.MarkaAD))
            {

                <option @(item._id == Model.MarkaID ? "selected" : "")  value="@item._id"> @item.MarkaAD</option>
            }
        </select>
    </div>
    <div class="col-md-4">
        <select class="js-example-basic-single form-control" id="Model">
            <option selected>Modeli seçiniz</option>
            @foreach (var item in Model.modeller.OrderBy(x => x.ModelAD))
            {
                <option @(item._id == Model.ModelID ? "selected" : "") value="@item._id"> @item.ModelAD</option>
            }
        </select>
    </div>
    <div class="col-md-4">
        <select class="js-example-basic-single form-control" id="Musteri">
            <option selected>Müşteri seçiniz</option>
            @foreach (var item in Model.musteriler.OrderBy(x => x.MusteriAdSoyad))
            {
                <option value="@item._id" @(item._id == Model.MusteriID ? "selected" : "")> @item.MusteriAdSoyad - @item.MusteriTC</option>
            }
        </select>
    </div>

</div>
<br />
<input type="button" class="btn btn-success" onclick="SaveArac()" value="Aracı Güncelle" />
<script>
    function SaveArac() {
        var plaka = $("#Plaka").val();
        var sasi = $("#SasiNo").val();
        var renk = $("#Renk").val();
        var marka = $("#Marka").val();
        var model = $("#Model").val();
        var musteri = $("#Musteri").val();
        var yil = $("#Yil").val();
        $.ajax({
            url: "/update-arac",
            type: "POST",
            dataType: "json",
            data: { plaka: plaka, sasi: sasi, renk: renk, marka: marka, model: model, musteri: musteri, yil: yil, id: '@Model._id' },
            success: function (deger) {
                if (deger == 1) {
                    Command: toastr["success"]("Araç Güncelleme İşlemi Başarılı.", "Araç")

                    toastr.options = {
                        "closeButton": false,
                        "debug": false,
                        "newestOnTop": false,
                        "progressBar": false,
                        "positionClass": "toast-top-right",
                        "preventDuplicates": false,
                        "onclick": null,
                        "showDuration": "300",
                        "hideDuration": "1000",
                        "timeOut": "5000",
                        "extendedTimeOut": "1000",
                        "showEasing": "swing",
                        "hideEasing": "linear",
                        "showMethod": "fadeIn",
                        "hideMethod": "fadeOut"
                    }
                }
                else {
                    Command: toastr["error"]("Araç Güncelleme İşlemi Başarısız.", "Araç")

                    toastr.options = {
                        "closeButton": false,
                        "debug": false,
                        "newestOnTop": false,
                        "progressBar": false,
                        "positionClass": "toast-top-right",
                        "preventDuplicates": false,
                        "onclick": null,
                        "showDuration": "300",
                        "hideDuration": "1000",
                        "timeOut": "5000",
                        "extendedTimeOut": "1000",
                        "showEasing": "swing",
                        "hideEasing": "linear",
                        "showMethod": "fadeIn",
                        "hideMethod": "fadeOut"
                    }
                }
            }
        })
    }
</script>
